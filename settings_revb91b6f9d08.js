define(["jquery","base/view","popup","util/helpers","util/date-format","util/num-end","client-server"],function(a,b,c,d,e,f,g){"use strict";function h(){}var i,j={invisibility:"GHOST_ENABLED",mask:"SHOW_MUSK_ENABLED",online:"SHOW_ONLINE"};return h.prototype={prepareServerSettings:function(a){var b={},c=a.flagsToSet,d=a.flagsToUnset;return void 0!==a.frameID&&(b.Invismaskno=a.frameID),void 0!==c&&0!==c.length&&(b.set_flags=c.join(",")),void 0!==d&&0!==d.length&&(b.unset_flags=d.join(",")),b},makeRequest:function(a,b,c){b=b||{},c=c||{},g.func(a,b,{success:function(a){var b,e;try{b=JSON.parse(a),e=b[3]}catch(a){}void 0!==e?d.isFunction(c.success)&&c.success(e):d.isFunction(c.error)&&c.error(a)},error:function(a){d.isFunction(c.error)&&c.error(a)},complete:function(){d.isFunction(c.complete)&&c.complete()}})},set:function(a,b){var c;c=this.prepareServerSettings(a),b=b||{},this.makeRequest("vip.settings",c,b)},getInfo:function(a){this.makeRequest("vip.info",{},a)},setFlags:function(a,b){var c={flagsToSet:a};this.set(c,b)},unsetFlags:function(a,b){var c={flagsToUnset:a};this.set(c,b)}},i=new h,i.POSSIBLE_SERVER_FLAGS=j,i});